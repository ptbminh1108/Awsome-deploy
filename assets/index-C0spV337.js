(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();let m="",c=0,l=0,f=10,d=[],g=null,i=60,h=!1,b=!0,y=0;const p={easy:{name:"Easy Peasy",pointsPerQuestion:10,maxNumber:10,operations:["+","-"],timeBonus:5},medium:{name:"Space Explorer",pointsPerQuestion:20,maxNumber:50,operations:["+","-","Ã—","Ã·"],timeBonus:10},hard:{name:"Math Master",pointsPerQuestion:30,maxNumber:100,operations:["+","-","Ã—","Ã·"],timeBonus:15}},B=window.AudioContext||window.webkitAudioContext;let s;function C(){s||(s=new B)}function M(e){if(!b)return;C();const t=s.createOscillator(),n=s.createGain();t.connect(n),n.connect(s.destination),e==="correct"?(t.frequency.setValueAtTime(523.25,s.currentTime),t.frequency.setValueAtTime(659.25,s.currentTime+.1),t.frequency.setValueAtTime(783.99,s.currentTime+.2),n.gain.setValueAtTime(.3,s.currentTime),n.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),t.start(s.currentTime),t.stop(s.currentTime+.5)):e==="incorrect"&&(t.frequency.setValueAtTime(329.63,s.currentTime),t.frequency.setValueAtTime(293.66,s.currentTime+.15),t.frequency.setValueAtTime(261.63,s.currentTime+.3),n.gain.setValueAtTime(.2,s.currentTime),n.gain.exponentialRampToValueAtTime(.01,s.currentTime+.6),t.start(s.currentTime),t.stop(s.currentTime+.6))}function S(){console.log("Initializing Math Fun Adventure game..."),document.getElementById("timerToggle").addEventListener("change",function(){h=this.checked,console.log("Timed mode:",h)}),document.getElementById("soundToggle").addEventListener("change",function(){b=this.checked,console.log("Sound enabled:",b)}),w("welcome-screen")}function w(e){console.log("Showing screen:",e),document.querySelectorAll(".game-section").forEach(r=>r.classList.remove("active"));const n=document.getElementById(e);n&&n.classList.add("active")}function q(e){console.log("Selected difficulty:",e),m=e,document.querySelectorAll(".difficulty-card").forEach(n=>n.classList.remove("selected")),event.target.closest(".difficulty-card").classList.add("selected"),setTimeout(()=>{N()},1e3)}function N(){console.log("Starting game with difficulty:",m),c=0,l=0,y=0,d=[],$(),document.getElementById("current-score").textContent=l,document.getElementById("question-number").textContent=c+1,document.getElementById("total-questions").textContent=f,h?(i=60,document.getElementById("timer-display").style.display="block",document.getElementById("timer-value").textContent=i,A()):document.getElementById("timer-display").style.display="none",w("game-screen"),T()}function $(){console.log("Generating questions for difficulty:",m);const e=p[m];d=[];for(let t=0;t<f;t++){const n=k(e);d.push(n)}console.log("Generated questions:",d)}function k(e){const t=e.operations[Math.floor(Math.random()*e.operations.length)];let n,r,o,a;switch(t){case"+":n=Math.floor(Math.random()*e.maxNumber)+1,r=Math.floor(Math.random()*e.maxNumber)+1,o=n+r,a=`${n} + ${r} = ?`;break;case"-":n=Math.floor(Math.random()*e.maxNumber)+1,r=Math.floor(Math.random()*n)+1,o=n-r,a=`${n} - ${r} = ?`;break;case"Ã—":n=Math.floor(Math.random()*Math.min(e.maxNumber/5,12))+1,r=Math.floor(Math.random()*Math.min(e.maxNumber/5,12))+1,o=n*r,a=`${n} Ã— ${r} = ?`;break;case"Ã·":r=Math.floor(Math.random()*9)+2,o=Math.floor(Math.random()*Math.min(e.maxNumber/r,15))+1,n=r*o,a=`${n} Ã· ${r} = ?`;break}const u=G(o,e.maxNumber);return{question:a,correctAnswer:o,allAnswers:P([o,...u])}}function G(e,t){const n=new Set;for([-3,-2,-1,1,2,3,Math.floor(e*.5),Math.floor(e*1.5)].forEach(o=>{const a=e+o;a>0&&a!==e&&a<=t*2&&n.add(a)});n.size<3;){const o=Math.floor(Math.random()*t*2)+1;o!==e&&n.add(o)}return Array.from(n).slice(0,3)}function P(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function T(){if(c>=d.length){x();return}const e=d[c];console.log("Displaying question:",e),document.getElementById("question-text").textContent=e.question,document.getElementById("question-number").textContent=c+1;const t=document.getElementById("answers-container");t.innerHTML="",e.allAnswers.forEach((r,o)=>{const a=document.createElement("button");a.className="answer-btn",a.textContent=r,a.onclick=()=>V(r,a),a.setAttribute("aria-label",`Answer option: ${r}`),t.appendChild(a)}),document.getElementById("feedback").innerHTML="";const n=c/f*100;document.getElementById("progress-bar").style.width=n+"%"}function V(e,t){const n=d[c],r=e===n.correctAnswer;console.log("Answer selected:",e,"Correct:",r);const o=document.querySelectorAll(".answer-btn");if(o.forEach(a=>a.disabled=!0),r){t.classList.add("correct"),y++;let a=p[m].pointsPerQuestion;h&&i>30&&(a+=p[m].timeBonus),l+=a,document.getElementById("current-score").textContent=l,v(!0,a),M("correct")}else t.classList.add("incorrect"),o.forEach(a=>{parseInt(a.textContent)===n.correctAnswer&&a.classList.add("correct")}),v(!1),M("incorrect");setTimeout(()=>{c++,T()},2500)}function v(e,t=0){const n=document.getElementById("feedback"),r=document.createElement("div");if(r.className=`feedback-message ${e?"correct":"incorrect"}`,e){const o=["ðŸŽ‰ Awesome!","â­ Great job!","ðŸš€ Fantastic!","ðŸŒŸ Excellent!","ðŸŽŠ Perfect!","ðŸ’« Amazing!","ðŸ† Super!"],a=o[Math.floor(Math.random()*o.length)];r.textContent=`${a} +${t} points!`}else{const o=["ðŸ’ª Keep trying!","ðŸŒˆ Almost there!","â­ You can do it!","ðŸŽ¯ Nice try!","ðŸŒŸ Don't give up!","ðŸ’– Great effort!","ðŸ¦Š Try again!"],a=o[Math.floor(Math.random()*o.length)];r.textContent=a}n.appendChild(r)}function A(){g=setInterval(()=>{i--,document.getElementById("timer-value").textContent=i;const e=document.getElementById("timer-value");i<=10?(e.style.color="#dc3545",e.style.animation="pulse 1s infinite"):i<=30&&(e.style.color="#ffc107"),i<=0&&x()},1e3)}function E(){g&&(clearInterval(g),g=null)}function x(){console.log("Game ended. Score:",l,"Correct answers:",y),E();const e=Math.round(y/Math.min(c+1,f)*100);document.getElementById("final-score").textContent=l,document.getElementById("accuracy-percentage").textContent=e+"%";let t,n,r;e>=90?(t="ðŸ† Math Master!",n="Outstanding! You're a math superstar!",r="ðŸ¦Šâœ¨"):e>=70?(t="â­ Great Job!",n="Excellent work! Keep practicing!",r="ðŸ¦ŠðŸ˜Š"):e>=50?(t="ðŸ’ª Good Effort!",n="Nice try! Practice makes perfect!",r="ðŸ¦ŠðŸ‘"):(t="ðŸŒŸ Keep Learning!",n="Don't give up! Every expert was once a beginner!",r="ðŸ¦ŠðŸ’–"),document.getElementById("results-title").textContent=t,document.getElementById("results-message").textContent=n,document.getElementById("results-mascot").textContent=r,O(l,e,m),w("results-screen")}function D(){console.log("Restarting game..."),c=0,l=0,y=0,d=[],E(),document.querySelectorAll(".difficulty-card").forEach(t=>t.classList.remove("selected")),w("welcome-screen")}function O(e,t,n){console.log("Saving score:",e,t,n);const r={score:e,accuracy:t,difficulty:n,date:new Date().toLocaleDateString(),timestamp:Date.now()};let o=L();o.push(r),o.sort((a,u)=>u.score-a.score),o=o.slice(0,10),localStorage.setItem("mathGameLeaderboard",JSON.stringify(o))}function L(){const e=localStorage.getItem("mathGameLeaderboard");return e?JSON.parse(e):[]}function I(){console.log("Showing leaderboard...");const e=L(),t=document.getElementById("leaderboard-content");e.length===0?t.innerHTML='<div class="no-scores">No scores yet! Play a game to get on the leaderboard!</div>':t.innerHTML=e.map((r,o)=>`
      <div class="leaderboard-entry ${o===0?"top-score":""}">
        <div class="leaderboard-rank">${o===0?"ðŸ‘‘":"#"+(o+1)}</div>
        <div class="leaderboard-details">
          <div class="leaderboard-score">${r.score} points</div>
          <div class="leaderboard-difficulty">${p[r.difficulty].name} â€¢ ${r.accuracy}% â€¢ ${r.date}</div>
        </div>
      </div>
    `).join(""),new bootstrap.Modal(document.getElementById("leaderboardModal")).show()}function Q(){confirm("Are you sure you want to clear the leaderboard?")&&(localStorage.removeItem("mathGameLeaderboard"),I(),console.log("Leaderboard cleared"))}function F(){console.log("Showing instructions..."),new bootstrap.Modal(document.getElementById("instructionsModal")).show()}window.selectDifficulty=q;window.showInstructions=F;window.showLeaderboard=I;window.clearLeaderboard=Q;window.restartGame=D;document.addEventListener("DOMContentLoaded",S);document.addEventListener("visibilitychange",function(){document.hidden&&g?(console.log("Page hidden, pausing timer..."),E()):!document.hidden&&h&&i>0&&c<f&&(console.log("Page visible, resuming timer..."),A())});document.addEventListener("keydown",function(e){if(e.key==="Enter"){const t=document.activeElement;t&&t.classList.contains("answer-btn")&&t.click()}});window.addEventListener("beforeunload",function(e){if(c>0&&c<f)return e.preventDefault(),e.returnValue="Are you sure you want to leave? Your progress will be lost.",e.returnValue});console.log("Math Fun Adventure game script loaded successfully! ðŸŽ®");
